<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pay — Quick</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<main class="wrap stack">
  <section class="card stack">
    <h1>Quick Pay</h1>
    <p class="lead">Use UPI or Litecoin. For custom invoices, use <a href="./new.html">Create invoice</a>.</p>

    <!-- UPI -->
    <div class="card stack">
      <h3>UPI</h3>
      <div class="two">
        <img id="upiQR" class="qr" alt="UPI QR">
        <div class="stack">
          <div class="row">
            <code class="badge" id="upiId">ullasfr@fam</code>
            <button class="btn" onclick="copyText('ullasfr@fam')">Copy</button>
          </div>
          <div class="row">
            <input id="upiAmt" type="number" step="0.01" min="0" placeholder="Amount (INR)">
            <button class="btn primary" id="upiOpen">Open UPI app</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Litecoin -->
    <div class="card stack">
      <h3>Litecoin</h3>
      <div class="two">
        <img id="ltcQR" class="qr" alt="LTC QR">
        <div class="stack">
          <div class="row">
            <code class="badge" id="ltcAddr">ltc1qf744fuu8uzsr9rplsns9sprv9nx3e9l4vxj50z</code>
            <button class="btn" onclick="copyText('ltc1qf744fuu8uzsr9rplsns9sprv9nx3e9l4vxj50z')">Copy</button>
          </div>
          <div class="row">
            <input id="usdAmt" type="number" step="0.01" min="0" placeholder="Amount (USD)">
            <button class="btn primary" id="ltcOpen">Open wallet</button>
          </div>
          <span id="rate" style="color:var(--muted);font-size:13px"></span>
        </div>
      </div>
    </div>

    <div class="row" style="justify-content:flex-end">
      <a class="btn" href="./new.html">Create invoice →</a>
    </div>
  </section>

  <section class="card row" style="justify-content:center">
    <a class="btn" href="mailto:support@ullas.shop">Contact support — support@ullas.shop</a>
  </section>

  <footer>&copy; <span id="yr"></span></footer>
</main>

<script>
const UPI_ID="ullasfr@fam", UPI_NAME="Ullas A", LTC_ADDR="ltc1qf744fuu8uzsr9rplsns9sprv9nx3e9l4vxj50z";
const $=id=>document.getElementById(id);
const qr=(d)=>`https://api.qrserver.com/v1/create-qr-code/?size=260x260&data=${encodeURIComponent(d)}`;

$("yr").textContent=new Date().getFullYear();

function upiURI(am){const p=new URLSearchParams({pa:UPI_ID,pn:UPI_NAME,cu:"INR"});if(am)p.set("am",am);return `upi://pay?${p}`;}
function setUpi(){const am=$("upiAmt").value.trim();const uri=upiURI(am);$("upiQR").src=qr(uri);$("upiOpen").onclick=()=>location.href=uri;}
$("upiAmt").addEventListener("input",setUpi);setUpi();

let ltcUsd=null;
async function price(){try{const r=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=litecoin&vs_currencies=usd");const j=await r.json();ltcUsd=j?.litecoin?.usd||null;$("rate").textContent=ltcUsd?`1 LTC ≈ $${ltcUsd.toFixed(2)}`:"";}catch{}}
price();setInterval(price,120000);
function setLtc(){const usd=$("usdAmt").value.trim();const uri=`litecoin:${LTC_ADDR}?amount=${ltcUsd?(usd/ltcUsd).toFixed(8):0}`;$("ltcQR").src=qr(uri);$("ltcOpen").onclick=()=>location.href=uri;}
$("usdAmt").addEventListener("input",setLtc);setLtc();

async function copyText(t){try{await navigator.clipboard.writeText(t);}catch{}}
</script>
</body>
</html>